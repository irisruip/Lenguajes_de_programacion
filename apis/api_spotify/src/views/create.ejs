<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear cancion</title>

    <link rel="stylesheet" href="/css/generales.css">
    <link rel="stylesheet" href="/css/generales.css">
    <link rel="stylesheet" href="/css/login.css">
    <style>
        .form {
            max-width: 500px;
            margin-top: 18%;
        }

        /* Estilo del círculo */
        .image-preview-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1rem;
        }

        .image-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border: 2px solid #13678A;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-label {
            margin-top: 0.5rem;
            color: #13678A;
            cursor: pointer;
            text-decoration: underline;
        }

        .upload-label:hover {
            color: #1db954;
        }

        input[type="file"] {
            display: none;
        }
    </style>
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="btn-menu">

            </div>
            <div class="logo">
                <a href="/">
                    <img src="/img/pngwing.com (1).png" alt="logo de spotify" class="logo-img">
                    <h1>Apitify</h1>
                </a>
            </div>
            <nav class="menu">
                <a href="/">Inicio</a>
                <!-- coloca la pagina de spotify, pero que al clickear se abra en una ventana nueva -->
                <a href="https://www.spotify.com/" target="_blank">Spotify</a>

            </nav>
        </div>
    </header>

    <main>

        <form class="form" method="post" enctype="application/x-www-form-urlencoded" action="/crear">
            <h1> Agrega tu cancion a la Api</h1>
            <!-- Campos existentes -->

            <div style="display: flex; gap: 1rem; width: 100%; margin-bottom: 1rem;">
                <span class="input-span" style="flex: 1;">
                    <label for="nombre" class="label">Nombre de la canción</label>
                    <input type="text" name="title" id="nombre" />
                </span>
                <span class="input-span" style="flex: 1;">
                    <label for="artista" class="label">Artista</label>
                    <input type="text" name="artist" id="artista" />
                </span>
            </div>
            <div style="display: flex; gap: 1rem; width: 100%; margin-bottom: 1rem;">
                <span class="input-span" style="flex: 1;">
                    <label for="genero" class="label">Género</label>
                    <input type="text" name="genre" id="genero" />
                </span>
                <span class="input-span" style="flex: 1;">
                    <label for="duracion" class="label">Duración</label>
                    <input type="text" name="duration" id="duracion" />
                </span>
            </div>
            <div style="display: flex; gap: 1rem; width: 100%; margin-bottom: 1rem;">
                <span class="input-span" style="flex: 1;">
                    <label for="album" class="label">Álbum</label>
                    <input type="text" name="album" id="album" />
                </span>
                <span class="input-span" style="flex: 1;">
                    <label for="fecha_lanzamiento" class="label">Fecha de lanzamiento</label>
                    <input type="date" name="year" id="fecha_lanzamiento" />
                </span>
            </div>

            <input class="submit" type="submit" value="Agregar cancion" />
        </form>



    </main>
    <script>
        //validar formulario
        const form = document.querySelector('.form');

        form.addEventListener('submit', (e) => {
            const title = document.querySelector('#nombre').value;
            const artist = document.querySelector('#artista').value;
            const genre = document.querySelector('#genero').value;
            const duration = document.querySelector('#duracion').value;
            const album = document.querySelector('#album').value;
            const year = document.querySelector('#fecha_lanzamiento').value;

            if (!title || !artist || !genre || !duration || !album || !year) {
                e.preventDefault();
                alert('Todos los campos son obligatorios');
            }

            //valida que la duracion sea mm:ss o m:ss

            else if (!/^\d{1,2}:\d{2}$/.test(duration)) {
                e.preventDefault();
                alert('La duración debe ser en formato mm:ss o m:ss');
            }

            //valida que titulo, artista, genero y album no tengan solo numeros
            else if (!isNaN(title) || !isNaN(artist) || !isNaN(genre) || !isNaN(album)) {
                e.preventDefault();
                alert('El título, artista, género o álbum no pueden ser solo números');
            }



        });
    </script>
</body>

</html>